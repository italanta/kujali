<app-page>
  <div class="container" *ngIf="user$ | async as user">

    <div class="metabase-iframe" *ngIf="!generatingMetabaseLink; else preparingDashboard">
        <iframe [src] = "iframeUrl | safe: 'resourceUrl'"
          frameborder="0"
          allowtransparency>
        </iframe>
    </div>

    <ng-template #preparingDashboard>
      <div class="preparing-dashboard" fxLayout="column" fxLayoutAlign="center center" fxLayoutGap="50px" fxFlexFill>
        <div class="spinner">
          <!-- <mat-spinner diameter="30" strokeWidth="5"></mat-spinner> -->
          <img src="assets/images/loading-meta.gif" alt="">
          <div style="text-align: center;" class="text">Preparing dashboard...</div>
        </div>
      </div>
    </ng-template>
  
  </div>
</app-page>
